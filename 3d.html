<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mvc-intro by severisv</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
	<link rel="stylesheet" href="lib/highlight/styles/atelier-heath.light.css">

  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">MVC-intro</h1>
      <h2 class="project-tagline">Introduksjon til ASP.NET MVC5</h2>
    </section>

    <section class="main-content">
 <a href="oppgave3.html#3d"><= Tilbake</a>
	<h3>Custom validering</h3>
	<p>
		Det går an å lage egne attributter for validering, og ofte er det en god idé, spesielt hvis man kan gjenbruke de på tvers av modeller.
	</p>
	<p>
		Har man derimot mer spesifikk validering på en bestemt modell, feks. kombinasjon av felter, avhengigheter mot databasen eller lignende, kan det være greit å implementere en valideringsmetode.<br>
		Ved å implementere interface <code>IValidatableObject</code> sørger man for at MVC-rammeverket automatisk kaller valideringsmetoden.	
	</p>
<p>Implementer <code>IValidatableObject</code> i <code>PersonModel</code>
<img src="img/3/ivalidatable.png" />
Trykk på den røde lampa (ALT + ENTER) og velg <i>Implement missing members</i><br>
Vi får følgende metode: <pre><code class="cs">public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
	throw new NotImplementedException();
}</code></pre>
	
Nå gjenstår det bare å legge til valideringslogikken i metoden.<br>
Vi ønsker å lage en liste med <code>ValidationResult</code> og legge til eventuelle feil i den lista:
<pre><code class="cs">public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
	var result = new List<ValidationResult>();

	if (FirstName.Length + LastName.Length < 5)
	{
		var validationResult = new ValidationResult("For- og etternavn må totalt være minst 5 bokstaver", new[] { "FirstName", "LastName" });
		result.Add(validationResult);
	}
	return result;
}</code></pre>
	Bygg og test!
	</p>

	<br>
 <a href="oppgave3.html#3d"><= Tilbake</a>

    </section>  
  </body>
  
  <script src="lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</html>

