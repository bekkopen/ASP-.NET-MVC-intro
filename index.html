<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mvc-intro by severisv</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
	<link rel="stylesheet" href="lib/highlight/styles/atelier-heath.light.css">

  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">MVC-intro</h1>
      <h2 class="project-tagline">Introduksjon til ASP.NET MVC5</h2>
    </section>

    <section class="main-content">
      <h3><a id="intro" class="anchor" href="#intro" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hva er ASP.NET MVC?</h3>

<p>ASP.NET MVC er Microsoft sitt foretrukne web-rammeverk. ASP står for <i>active server pages</i>, .NET er betegnelsen på Microsoft sitt kode-rammeverk og MVC (<i>model-view-controller</i>) er et etterhvert veldig vanlig arkitekturmønster for webutvikling.</p>
<p>
Backend-kode skrives vanligvis i C# (det er også mulig i F#) og frontend-kode skrives i en kombinasjon av C#, HTML og JavaScript.
</p>
   <h3><a id="mvc" class="anchor" href="#mvc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model-View-Controller</h3>
<p>
	MVC-mønsteret går ut på at man skiller data-modellen, prosessering av handlinger (requests) og visningen av data i forskjellige komponenter:
</p>
   <img height="400" src="img/master/mvc.png">
   
 <p>
	I praksis kan det bety at en bruker går inn på http://kjellshjemmeside.com/home/vis. -> nettleseren sender en http-request til serveren, som MVC-rammeverket automatisk videresenter til HomeController sin Vis-metode. Vis-metoden fyller en Modell med data og sender denne modellen til Vis-viewet. I Vis-viewet blir denne dataen kombinert med HTML-markup som rammeverket så konverterer til en helt ordninær HTML-side som sendes tilbake til nettleseren.
 </p>
 
 <p>
	I .NET MVC benyttes Model-, View- og Controller-begrepene om konkrete filer hvor Model og Controller er helt vanlige C#-klasser, mens Viewet er en .cshtml-fil som hvor man kan skrive HTML og C#-kode om hverandre. View-filene kompileres av en såkalt ViewEngine som heter <i>Razor</i>, og blir deretter til helt vanlige HTML-filer.
 </p>
<h3>Model</h3>
<p>Modellen er en helt vanlig C#-klasse, vanligvis postfixet med <i>Model</i>. Dette har ingen funksjon, men det er greit for utviklere å vite at det er snakk om en modell. Den er gjerne en representasjon av et helt vanlig ting i forretnings-domenet til applikasjonen vår, for eksempel en bil:</p>

<pre>
<code class="csharp">
public class CarModel
{
	public int Id { get; set; }
	public string Make { get; set; }
	public int ProductionYear { get; set; }
}
</code></pre>

<h3>Controller</h3>
<p>En Controller er også en helt vanlig C#-klasse som må postfixes med <i>Controller</i> og arve fra base-klassen <code>Controller</code></p>
<p>Metodene returnerer et svar av typen <code>ActionResult</code>. Hver metode på en Controller tilsvarer en <i>Action</i> som kan brukes til å sende ut en hel side, eller deler av en side.
</p>
<pre>
<code class="csharp">
public class HomeController : Controller
{
	public ActionResult Index()
	{
		return View();
	}	

	public ActionResult Show(int carId)
	{
		model = _carRepository.Get(carId);
		return View(model);
	}
}
</code></pre>
<p>MVC-rammeverket benytter konvensjon til å kalle riktig Action fra riktig url. </p> 
<p>For eksempel vil <code>minurl.mittdomene/home/show</code> lede til <code>Show()</code> </p>
<p>

 <code>minurl.mittdomene/home </code> eller <code>minurl.mittdomene/home/index</code> lede til <code>Index()</code>. Dette er også konvensjonsbasert - dersom <i>Action</i> ikke er spesifisert leter den automatisk etter Index.</p>
 
 
 <h3>View</h3>
<p>Viewet er selve siden som vises og er en blanding av HTML og C#. Man kan spesifisere i en Action hvilket View som skal benyttes eller man kan la MVC-rammeverket forsøke å finne ut av det selv. Dersom man ikke spesifiserer vil MVC lete i <code>Views/&lt;controllername>/<action>.cshtml</code></p>

<pre>
<code>Views/Home/Show.cshtml</code>
<code class="html">
@model MyMvcApplication.Models.CarModel

&lt;h2>@Model.Make&lt;/h2>
&lt;p>Id: @Model.Id&lt;/p>
&lt;p>Year: @Model.ProductionYear&lt;/p>
</code></pre>
 
 <p>
 C#-kode prefixes med @ for at <i>Razor</i> (view-kompilatoren) skal vite at det skal tolkes som C#.
 </p>
 

    </section>

  
  </body>
  
  <script src="lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</html>

